<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 3 Session 1.1 | Intro to R workshop</title>
<meta name="author" content="Emily Nordmann">
<meta name="description" content="3.1 Organising a project Before we write any code, first, we need to get organised. Projects in RStudio are a way to group all the files you need for one project. Most projects include scripts,...">
<meta name="generator" content="bookdown 0.25 with bs4_book()">
<meta property="og:title" content="Chapter 3 Session 1.1 | Intro to R workshop">
<meta property="og:type" content="book">
<meta property="og:url" content="https://psyteachr.github.io/workshop-dataviz/session-1-1.html">
<meta property="og:image" content="https://psyteachr.github.io/workshop-dataviz/images/logos/logo.png">
<meta property="og:description" content="3.1 Organising a project Before we write any code, first, we need to get organised. Projects in RStudio are a way to group all the files you need for one project. Most projects include scripts,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 3 Session 1.1 | Intro to R workshop">
<meta name="twitter:description" content="3.1 Organising a project Before we write any code, first, we need to get organised. Projects in RStudio are a way to group all the files you need for one project. Most projects include scripts,...">
<meta name="twitter:image" content="https://psyteachr.github.io/workshop-dataviz/images/logos/logo.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Intro to R workshop</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li><a class="" href="installing-r.html"><span class="header-section-number">1</span> Prep: Installing R</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">2</span> Prep: Intro to R and RStudio</a></li>
<li><a class="active" href="session-1-1.html"><span class="header-section-number">3</span> Session 1.1</a></li>
<li><a class="" href="session-1-2.html"><span class="header-section-number">4</span> Session 1.2</a></li>
<li><a class="" href="session-2-2.html"><span class="header-section-number">5</span> Session 2.2</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="glossary.html"><span class="header-section-number">A</span> Glossary</a></li>
<li><a class="" href="license.html">License</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/psyteachr/template">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="session-1-1" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Session 1.1<a class="anchor" aria-label="anchor" href="#session-1-1"><i class="fas fa-link"></i></a>
</h1>
<div id="projects" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Organising a project<a class="anchor" aria-label="anchor" href="#projects"><i class="fas fa-link"></i></a>
</h2>
<p>Before we write any code, first, we need to get organised. <a class="glossary" target="_blank" title="A way to organise related files in RStudio" href="https://psyteachr.github.io/glossary/p#project">Projects</a> in RStudio are a way to group all the files you need for one project. Most projects include scripts, data files, and output files like the PDF report created by the script or images.</p>
<p>The folder that R will look in by default to find and save files is known as the <a class="glossary" target="_blank" title="The filepath where R is currently reading and writing files." href="https://psyteachr.github.io/glossary/w#working-directory">working directory</a>. You can set the working directory manually to the folder you want to work in with menu commands:</p>
<ul>
<li><strong><code>Session &gt; Set Working Directory &gt; Choose Directory...</code></strong></li>
</ul>
<p>However, there's a better way of organising your files by using Projects in RStudio.</p>
<div id="project-start" class="section level3" number="3.1.1">
<h3>
<span class="header-section-number">3.1.1</span> Start a Project<a class="anchor" aria-label="anchor" href="#project-start"><i class="fas fa-link"></i></a>
</h3>
<p>To create a new project for this workshop:</p>
<ul>
<li><strong><code>File &gt; New Project...</code></strong></li>
<li>Name the project <code class="path">workshop-dataviz</code>
</li>
<li>Save it somewhere sensible on your computer.</li>
</ul>
<p>RStudio will restart itself and open with this new project directory as the working directory.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-1"></span>
<img src="images/reports/new_proj_1.png" alt="Starting a new project." width="32%"><img src="images/reports/new_proj_2.png" alt="Starting a new project." width="32%"><img src="images/reports/new_proj_3.png" alt="Starting a new project." width="32%"><p class="caption">
Figure 3.1: Starting a new project.
</p>
</div>
<p>Click on the Files tab in the lower right pane to see the contents of the project directory. You will see a file called <code>workshop-dataviz.Rproj</code>, which is a file that contains all of the project information. You can double-click on it to open up the project.</p>
<div class="info">
<p>Depending on your settings, you may also see a directory called <code>.Rproj.user</code>, which contains your specific user settings. You can ignore this and other "invisible" files that start with a full stop.</p>
</div>
</div>
</div>
<div id="rmarkdown" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> R Markdown<a class="anchor" aria-label="anchor" href="#rmarkdown"><i class="fas fa-link"></i></a>
</h2>
<p>For this workshop we will use <a class="glossary" target="_blank" title="The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code." href="https://psyteachr.github.io/glossary/r#r-markdown">R Markdown</a>. We won't have time to cover too many of the features of R Markdown but it's an incredibly powerful format that allows you to create fully reproducible reports where all text, code, and analysis is contained within the one document. You can also use it to create websites, online books (like this one), presentations, and Shiny apps. If you'd like to learn more about R Markdown, there's links to additional resources in Section <a href="session-1-1.html#resources-viz">3.10</a>.</p>
<div id="new-document" class="section level3" number="3.2.1">
<h3>
<span class="header-section-number">3.2.1</span> New document<a class="anchor" aria-label="anchor" href="#new-document"><i class="fas fa-link"></i></a>
</h3>
<p>To open a new R Markdown document click:</p>
<ul>
<li><strong><code>File &gt; New File &gt; R Markdown</code></strong></li>
</ul>
<p>You will be prompted to give it a title; call the document <code>Day 1</code>. You can also change the author name. Keep the output format as HTML.</p>
<p>Once you've opened a new document be sure to save it by clicking <strong><code>File &gt; Save As...</code></strong>. You should name this file <code>day_1</code> (if you are on a Mac and can see the file <a class="glossary" target="_blank" title="The end part of a file name that tells you what type of file it is (e.g., .R or .Rmd)." href="https://psyteachr.github.io/glossary/e#extension">extension</a>, name it <code>day_1.Rmd</code>). This file will automatically be saved in your project folder, i.e., your working directory, so you should now see this file appear in your file viewer pane.</p>
<p>When you first open a new R Markdown document you will see a bunch of welcome text that looks like this:</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:img-markdown-default"></span>
<img src="images/reports/markdown-default.png" alt="New R Markdown text" width="100%"><p class="caption">
Figure 3.2: New R Markdown text
</p>
</div>
<p>Do the following steps:</p>
<ul>
<li>Change the title to "Intro to R session 1" and the author to your name</li>
<li>Delete <strong>everything</strong> after the setup chunk</li>
<li>Skip a line after the setup chunk and type "## Set-up" (with the hashes but without the quotation marks); make sure there are no spaces before the hashes and at least one space after the hashes before the subtitle</li>
<li>Skip a line and click the insert new code menu (a green box with a C and a plus sign) then <strong><code>R</code></strong>
</li>
</ul>
</div>
<div id="code-chunks" class="section level3" number="3.2.2">
<h3>
<span class="header-section-number">3.2.2</span> Code chunks<a class="anchor" aria-label="anchor" href="#code-chunks"><i class="fas fa-link"></i></a>
</h3>
<p>What you have created is a subtitle and a <strong>code chunk</strong>. In R Markdown, anything written in a grey code chunk is assumed to be code, and anything written in the white space (between the code chunks) is regarded as normal text (the actual colours will depend on which theme you have applied, but we will refer to the default white and grey). This makes it easy to combine both text and code in one document.</p>
<div class="dangerous">
<p>When you create a new code chunk you should notice that the grey box starts and ends with three back ticks ```. One common mistake is to accidentally delete these back ticks. Remember, code chunks and text entry are different colours - if the colour of certain parts of your Markdown doesn't look right, check that you haven't deleted the back ticks.</p>
</div>
<p>In your code chunk, write the code to load some of the packages that you installed in the prep work.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jrnold/ggthemes">ggthemes</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="running-code" class="section level3" number="3.2.3">
<h3>
<span class="header-section-number">3.2.3</span> Running code<a class="anchor" aria-label="anchor" href="#running-code"><i class="fas fa-link"></i></a>
</h3>
<p>When you're working in an R Markdown document, there are several ways to run your lines of code.</p>
<ol style="list-style-type: decimal">
<li><p>First, you can highlight the code you want to run and then click <code>Run</code> -&gt; <code>Run Selected Line(s)</code>, however this is tedious and can cause problems if you don't highlight <em>exactly</em> the code you want to run.</p></li>
<li><p>Alternatively, you can press the green "play" button at the top-right of the code chunk and this will run <strong>all</strong> lines of code in that chunk.</p></li>
<li><p>Even better is to learn some of the keyboard short cuts for R Studio. To run a single line of code, make sure that the cursor is in the line of code you want to run (it can be anywhere) and press <code>ctrl + enter</code> or <code>Cmd + enter</code> if you're on a Mac. If you want to run all of the code in the code chunk, press <code>ctrl/cmd + shift + enter</code>. Learn these short cuts, they will make your life easier!</p></li>
</ol>
<p>Run your code using method 3. You should see the packages load in the console.</p>
</div>
</div>
<div id="loading-data" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Loading data<a class="anchor" aria-label="anchor" href="#loading-data"><i class="fas fa-link"></i></a>
</h2>
<p>Broadly speaking there are three types of data you can load when working in R:</p>
<ol style="list-style-type: decimal">
<li>Built-in data sets that come with the packages you install that are useful for reproducible demos. Common ones you will see when you Google help documentation are <code>mtcars</code> and <code>diamonds</code>.</li>
<li>Data sets stored online and accessed via a URL.</li>
<li>Data sets stored locally on your computer.</li>
</ol>
<p>We'll start with 1 and move to 2 and 3 soon.</p>
<div id="built-in-data" class="section level3" number="3.3.1">
<h3>
<span class="header-section-number">3.3.1</span> Built-in data<a class="anchor" aria-label="anchor" href="#built-in-data"><i class="fas fa-link"></i></a>
</h3>
<p>The <code><span class="fu"><a target="_blank" href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="op">)</span></code> function lists the data sets available.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># list datasets built in to base R</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># lists datasets in a specific package</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"dplyr"</span><span class="op">)</span></code></pre></div>
<p>Type the name of a data set into the <a class="glossary" target="_blank" title="The pane in RStudio where you can type in commands and view output messages." href="https://psyteachr.github.io/glossary/c#console">console</a> to see the data. For example, type <code><a href="https://dplyr.tidyverse.org/reference/starwars.html">?starwars</a></code> into the console to see the dataset description for <code>starwars</code>, which is a data set included with <code class="package">dplyr</code>.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span><span class="va">starwars</span></code></pre></div>
<p>You can also use the <code><span class="fu"><a target="_blank" href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="op">)</span></code> function to load a dataset into your <a class="glossary" target="_blank" title="The interactive workspace where your script runs" href="https://psyteachr.github.io/glossary/g#global-environment">global environment</a>.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># loads starwars into the environment</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"starwars"</span><span class="op">)</span></code></pre></div>
<p>You can now use this data. Insert a new heading (##) named "My first plot". The underneath it, create a new code chunk, and copy, paste, and run the below code. You may not understand this yet, but you will by the end of the session.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mass</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_economist.html">theme_economist</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Mass of Star Wars characters"</span>,
       subtitle <span class="op">=</span> <span class="st">"Original trilogy"</span><span class="op">)</span></code></pre></div>
</div>
<div id="loading-online" class="section level3" number="3.3.2">
<h3>
<span class="header-section-number">3.3.2</span> Online sources<a class="anchor" aria-label="anchor" href="#loading-online"><i class="fas fa-link"></i></a>
</h3>
<p>Now, let's try loading data that is stored online. Create a code chunk in your document and copy, paste, and run the below code. This code loads some simulated customer satisfaction data.</p>
<ul>
<li>The data is stored in a <code>.csv</code> file so we're going to use the <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> function to load it in.</li>
<li>Note that the url is contained within double quotation marks - it won't work without this.</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">survey_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://psyteachr.github.io/ads-v1/data/survey_data.csv"</span><span class="op">)</span></code></pre></div>
<div class="warning">
<p>If you get an error message that looks like:</p>
<blockquote>
<p>Error in read_csv("<a href="https://psyteachr.github.io/ads-v1/data/survey_data.csv" class="uri">https://psyteachr.github.io/ads-v1/data/survey_data.csv</a>") :<br>
could not find function "read_csv"</p>
</blockquote>
<p>This means that you have not loaded tidyverse. Check that <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code> is in the setup chunk and that you have run the setup chunk.</p>
</div>
<p>This data is simulated data for a call centre customer satisfaction survey. The first thing you should do when you need to plot data is to get familiar with what all of the rows (observations) and columns (variables) mean. Sometimes this is obvious, and sometimes it requires help from the data provider. Here, each row represents one call to the centre.</p>
<ul>
<li>
<code>caller_id</code> is a unique ID for each caller</li>
<li>
<code>employee_id</code> is a unique ID for each employee taking calls</li>
<li>
<code>call_start</code> is the date and time that the call arrived</li>
<li>
<code>wait_time</code> is the number of seconds the caller had to wait</li>
<li>
<code>call_time</code> is the number of seconds the call lasted after the employee picked up</li>
<li>
<code>issue_category</code> is whether the issue was tech, sales, returns, or other</li>
<li>
<code>satisfaction</code> is the customer satisfaction rating on a scale from 1 (very unsatisfied) to 5 (very satisfied)</li>
</ul>
<p>Create another heading (##) named "My second plot", another code chunk below it, and copy, paste, and run the code below.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"wheat"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_excel.html">theme_excel</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Time spent on call (seconds)"</span>,
       title <span class="op">=</span> <span class="st">"Customer calls"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="rmd-knit" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Knitting your file<a class="anchor" aria-label="anchor" href="#rmd-knit"><i class="fas fa-link"></i></a>
</h2>
<p>Before we move on to focus on visualisation, we are going to <a class="glossary" target="_blank" title="To create an HTML, PDF, or Word document from an R Markdown (Rmd) document" href="https://psyteachr.github.io/glossary/k#knit">knit</a>, or compile, the file into a document type of our choosing. To knit your file click:</p>
<ul>
<li><strong><code>Knit &gt; Knit to HMTL</code></strong></li>
</ul>
<p>R Markdown will create and display a new HTML document, but it will also automatically save this file in your working directory.</p>
<div class="info">
<p>You can also knit by typing the following code into the console. Never put this in an Rmd script itself, or it will try to knit itself in an infinite loop.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">render</a></span><span class="op">(</span><span class="st">"day_1.Rmd"</span><span class="op">)</span>

<span class="co"># alternatively, you can use this, but may get a warning</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/knit2html.html">knit2html</a></span><span class="op">(</span><span class="st">"day_1.Rmd"</span><span class="op">)</span></code></pre></div>
</div>
<p>We don't have time to cover how to customise the knitted output in this workshop, but suffice to say that you can control almost every aspect, from whether the code is displayed or hidden, to the size and placement of the figures.</p>
<p>As you work through this workshop, we encourage you to use the Markdown document to take notes on the code and the output you create so that you have a complete single record of the work you've done. In particular, use headings and new code chunks to separate tasks, and if (when) you experience an error, make a note of how you fixed it.</p>
<p>Ok, let's get started properly.</p>
</div>
<div id="building-plots" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> Building plots<a class="anchor" aria-label="anchor" href="#building-plots"><i class="fas fa-link"></i></a>
</h2>
<p>There are multiple approaches to data visualisation in R; in this workshop we will use the popular package <code class="package">ggplot2</code>, which is part of the larger <code>tidyverse</code> collection of packages. A grammar of graphics (the "gg" in "ggplot") is a standardised way to describe the components of a graphic. <code class="package">ggplot2</code> uses a layered grammar of graphics, in which plots are built up in a series of layers. It may be helpful to think about any picture as having multiple elements that sit semi-transparently over each other. A good analogy is old Disney movies where artists would create a background and then add moveable elements on top of the background via transparencies.</p>
<p>Figure <a href="session-1-1.html#fig:layers">3.3</a> displays the evolution of a simple scatterplot using this layered approach. First, the plot space is built (layer 1); the variables are specified (layer 2); the type of visualisation (known as a <code>geom</code>) that is desired for these variables is specified (layer 3) - in this case <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> is called to visualise individual data points; a second geom is added to include a line of best fit (layer 4), the axis labels are edited for readability (layer 5), and finally, a theme is applied to change the overall appearance of the plot (layer 6).</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:layers"></span>
<img src="03-session1.1_files/figure-html/layers-1.png" alt="Evolution of a layered plot" width="100%"><p class="caption">
Figure 3.3: Evolution of a layered plot
</p>
</div>
<p>Importantly, each layer is independent and independently customisable. For example, the size, colour and position of each component can be adjusted, or one could, for example, remove the first geom (the data points) to only visualise the line of best fit, simply by removing the layer that draws the data points (Figure <a href="session-1-1.html#fig:remove-layer">3.4</a>). The use of layers makes it easy to build up complex plots step-by-step, and to adapt or extend plots from existing code.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:remove-layer"></span>
<img src="03-session1.1_files/figure-html/remove-layer-1.png" alt="Final plot with scatterplot layer removed." width="100%"><p class="caption">
Figure 3.4: Final plot with scatterplot layer removed.
</p>
</div>
</div>
<div id="plot-setup" class="section level2" number="3.6">
<h2>
<span class="header-section-number">3.6</span> Plot setup<a class="anchor" aria-label="anchor" href="#plot-setup"><i class="fas fa-link"></i></a>
</h2>
<div id="plot-setup-data" class="section level3" number="3.6.1">
<h3>
<span class="header-section-number">3.6.1</span> Data<a class="anchor" aria-label="anchor" href="#plot-setup-data"><i class="fas fa-link"></i></a>
</h3>
<p>Every plot starts with the <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> function and a data table. If your data are not loaded or you have a typo in your code, this will give you an error message. It's best to check your plot after each step, so that you can figure out where errors are more easily.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">survey_data</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:build-plot-setup"></span>
<img src="03-session1.1_files/figure-html/build-plot-setup-1.png" alt="A blank ggplot." width="100%"><p class="caption">
Figure 3.5: A blank ggplot.
</p>
</div>
</div>
<div id="mapping" class="section level3" number="3.6.2">
<h3>
<span class="header-section-number">3.6.2</span> Mapping<a class="anchor" aria-label="anchor" href="#mapping"><i class="fas fa-link"></i></a>
</h3>
<p>The next <a class="glossary" target="_blank" title="A variable that provides input to a function." href="https://psyteachr.github.io/glossary/a#argument">argument</a> to <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> is the <code>mapping</code>. This tells the plot which columns in the data should be represented by, or "mapped" to, different aspects of the plot, such as the x-axis, y-axis, line colour, object fill, or line style. These aspects, or "aesthetics", are listing inside the <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> function.</p>
<p>Set the arguments <code>x</code> and <code>y</code> to the names of the columns you want to be plotted on those axes. Here, we want to plot the wait time on the x-axis and the call time on the y-axis.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># set up the plot with mapping</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">survey_data</span>, 
  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:build-plot-mapping"></span>
<img src="03-session1.1_files/figure-html/build-plot-mapping-1.png" alt="A blank plot with x- and y- axes mapped." width="100%"><p class="caption">
Figure 3.6: A blank plot with x- and y- axes mapped.
</p>
</div>
<div class="info">
<p>In the example above, we wrote out the names of the <a class="glossary" target="_blank" title="A variable that provides input to a function." href="https://psyteachr.github.io/glossary/a#argument">arguments</a> <code>data</code> and <code>mapping</code>, but in practice, almost everyone omits them. Just make sure you put the data and mapping in the right order.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>,  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wait_time</span>, <span class="va">call_time</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="geoms" class="section level3" number="3.6.3">
<h3>
<span class="header-section-number">3.6.3</span> Geoms<a class="anchor" aria-label="anchor" href="#geoms"><i class="fas fa-link"></i></a>
</h3>
<p>Now we can add our plot elements in layers. These are referred to as <a class="glossary" target="_blank" title="The geometric style in which data are displayed, such as boxplot, density, or histogram." href="https://psyteachr.github.io/glossary/g#geom">geoms</a> and their functions start with <code>geom_</code>. You <strong>add</strong> layers onto the base plot created by <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> with a plus (<code>+</code>).</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># scatterplot</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:build-plot-geoms"></span>
<img src="03-session1.1_files/figure-html/build-plot-geoms-1.png" alt="Adding a scatterplot with geom_point()." width="100%"><p class="caption">
Figure 3.7: Adding a scatterplot with geom_point().
</p>
</div>
<div class="warning">
<p>Somewhat annoyingly, the plus has to be on the end of the previous line, not at the start of the next line. If you do make this mistake, it will run the first line of code to produce the base layer but then you will get the following error message rather than adding on <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-session1.1_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># scatterplot</span></code></pre></div>
<pre><code>## Error:
## ! Cannot use `+.gg()` with a single argument. Did you accidentally put + on a new line?</code></pre>
</div>
</div>
<div id="multiple-geoms" class="section level3" number="3.6.4">
<h3>
<span class="header-section-number">3.6.4</span> Multiple geoms<a class="anchor" aria-label="anchor" href="#multiple-geoms"><i class="fas fa-link"></i></a>
</h3>
<p>Part of the power of <code class="package">ggplot2</code> is that you can add more than one geom to a plot by adding on extra layers and so it quickly becomes possible to make complex and informative visualisations. Importantly, the layers display in the order you set them up. The code below uses the same geoms to produce a scatterplot with a line of best fit but orders them differently.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Points first</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="co"># scatterplot</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">lm</span><span class="op">)</span> <span class="co"># line of best fit</span>

<span class="co"># Line first</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">lm</span><span class="op">)</span> <span class="op">+</span> <span class="co"># line of best fit</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># scatterplot</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:build-plot-geom2"></span>
<img src="03-session1.1_files/figure-html/build-plot-geom2-1.png" alt="Points first versus line first." width="100%"><p class="caption">
Figure 3.8: Points first versus line first.
</p>
</div>
</div>
<div id="saving-plots" class="section level3" number="3.6.5">
<h3>
<span class="header-section-number">3.6.5</span> Saving plots<a class="anchor" aria-label="anchor" href="#saving-plots"><i class="fas fa-link"></i></a>
</h3>
<p>Just like you can save numbers and data tables to objects, you can also save the output of <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>. The code below produces the same plots we created above but saves them to objects named <code>point_first</code> and <code>line_first</code>. If you run this code, the plots won't display like they have done before. Instead, you'll see the object names appear in the environment pane.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">point_first</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="co"># scatterplot</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">lm</span><span class="op">)</span> <span class="co"># line of best fit</span>
  
<span class="va">line_first</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">lm</span><span class="op">)</span> <span class="op">+</span> <span class="co"># line of best fit</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># scatterplot</span></code></pre></div>
<p>To view the plots, call the objects by name. This will output each plot separately.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">point_first</span> <span class="co"># view first plot</span>
<span class="va">line_first</span> <span class="co"># view second plot</span></code></pre></div>
</div>
<div id="combining-plots" class="section level3" number="3.6.6">
<h3>
<span class="header-section-number">3.6.6</span> Combining plots<a class="anchor" aria-label="anchor" href="#combining-plots"><i class="fas fa-link"></i></a>
</h3>
<p>One of the reasons to save your plots to objects is so that you can combine multiple plots using functions from the <code>patchwork</code> package. The below code produces the above plot by combining the two plots with <code>+</code> and then specifying that we want the plots produced on a single row with the <code>nrow</code> argument in <code><a href="https://patchwork.data-imaginist.com/reference/plot_layout.html">plot_layout()</a></code>.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add plots together in 1 row; try changing nrow to 2</span>
<span class="va">point_first</span> <span class="op">+</span> <span class="va">line_first</span> <span class="op">+</span> <span class="fu"><a href="https://patchwork.data-imaginist.com/reference/plot_layout.html">plot_layout</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:build-plot-geom2b"></span>
<img src="03-session1.1_files/figure-html/build-plot-geom2b-1.png" alt="Combining plots with patchwork." width="100%"><p class="caption">
Figure 3.9: Combining plots with patchwork.
</p>
</div>
</div>
</div>
<div id="customising-plots" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> Customising plots<a class="anchor" aria-label="anchor" href="#customising-plots"><i class="fas fa-link"></i></a>
</h2>
<div id="format-axes" class="section level3" number="3.7.1">
<h3>
<span class="header-section-number">3.7.1</span> Format axes<a class="anchor" aria-label="anchor" href="#format-axes"><i class="fas fa-link"></i></a>
</h3>
<p>Now we need to make the axes look neater. There are several functions you can use to change the axis labels, but the most powerful ones are the <code>scale_</code> functions. You need to use a scale function that matches the data you're plotting on that axis and this is where it becomes particularly important to know what type of data you're working with. Both of the axes here are <a class="glossary" target="_blank" title="Data that can take on any values between other existing values." href="https://psyteachr.github.io/glossary/c#continuous">continuous</a>, so we'll use <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous()</a></code>.</p>
<p>The <code>name</code> argument changes the axis label. The <code>breaks</code> argument sets the major units and needs a <a class="glossary" target="_blank" title="A type of data structure that collects values with the same data type, like T/F values, numbers, or strings." href="https://psyteachr.github.io/glossary/v#vector">vector</a> of possible values, which can extend beyond the range of the data (e.g., <code>wait time</code> only goes up to 350, but we can specify breaks up to 600 in case we wanted to reuse our code with new data with different values). The <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code> function creates a sequence of numbers <code>from</code> one <code>to</code> another <code>by</code> specified steps.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">lm</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Wait Time (seconds)"</span>, 
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">600</span>, by <span class="op">=</span> <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Call time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">600</span>, by <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:build-plot-axes"></span>
<img src="03-session1.1_files/figure-html/build-plot-axes-1.png" alt="Formatting plot axes with scale_ functions." width="100%"><p class="caption">
Figure 3.10: Formatting plot axes with scale_ functions.
</p>
</div>
<div class="try">
<p>Check the help for <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">?scale_x_continuous</a></code> to see how you would set the minor units or specify how many breaks you want instead.</p>
</div>
</div>
<div id="axis-limits" class="section level3" number="3.7.2">
<h3>
<span class="header-section-number">3.7.2</span> Axis limits<a class="anchor" aria-label="anchor" href="#axis-limits"><i class="fas fa-link"></i></a>
</h3>
<p>If you want to change the minimum and maximum values on an axis, use the <code><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian()</a></code> function. Many plots make more sense if the minimum and maximum values represent the range of possible values, even if those values aren't present in the data. Here, wait and call times can't be less than 0 seconds, so we'll set the minimum values to 0 and the maximum values to the first break above the highest value.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"dodgerblue"</span>, 
             alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">lm</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Wait Time (seconds)"</span>, 
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">600</span>, by <span class="op">=</span> <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Call time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">600</span>, by <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">360</span><span class="op">)</span>, 
                  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">180</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:build-plot-limits"></span>
<img src="03-session1.1_files/figure-html/build-plot-limits-1.png" alt="Changing the axis limits." width="100%"><p class="caption">
Figure 3.11: Changing the axis limits.
</p>
</div>
<div class="dangerous">
<p>You can also set the <code>limits</code> argument inside the <code>scale_</code> functions, but this actually removes any data that falls outside these limits, rather than cropping your plot, and this can change the appearance of certain types of plots like violin plots and density plots.</p>
</div>
</div>
<div id="themes" class="section level3" number="3.7.3">
<h3>
<span class="header-section-number">3.7.3</span> Themes<a class="anchor" aria-label="anchor" href="#themes"><i class="fas fa-link"></i></a>
</h3>
<p><code class="package">ggplot2</code> comes with several built-in themes, such as <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw()</a></code>, but the <code class="package"><a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/" target="_blank">ggthemes</a></code> package provides even more themes to match different software, such as GoogleDocs or Stata, or publications, such as the Economist or the Wall Street Journal. Let's add the GoogleDocs theme, but change the font size to 18 with the <code>base_size</code> argument.</p>
<p>It's also worth highlighting that this code is starting to look quite complicated because of the number of layers, but because we've built it up slowly it should (hopefully!) make sense. If you see examples of <code class="package">ggplot2</code> code online that you'd like to adapt, build the plot up layer by layer and it will make it easier to understand what each layer adds.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">lm</span>, 
              formula <span class="op">=</span> <span class="va">y</span><span class="op">~</span><span class="va">x</span>, 
              colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html">rgb</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">.5</span>, <span class="fl">.8</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Wait Time (seconds)"</span>, 
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">600</span>, by <span class="op">=</span> <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Call time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">600</span>, by <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">360</span><span class="op">)</span>, 
                  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">180</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_gdocs.html">theme_gdocs</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:build-plot-theme"></span>
<img src="03-session1.1_files/figure-html/build-plot-theme-1.png" alt="Changing the theme." width="100%"><p class="caption">
Figure 3.12: Changing the theme.
</p>
</div>
</div>
</div>
<div id="appropriate-plots" class="section level2" number="3.8">
<h2>
<span class="header-section-number">3.8</span> Appropriate plots<a class="anchor" aria-label="anchor" href="#appropriate-plots"><i class="fas fa-link"></i></a>
</h2>
<p>Now that you know how to build up a plot by layers and customise its appearance, you're ready to learn about some more plot types. Different types of data require different types of plots, so this section is organised by data type.</p>
<p>The <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-visualization.pdf">ggplot2 cheat sheet</a> is a great resource to help you find plots appropriate to your data, based on how many variables you're plotting and what type they are. The examples below all use the same customer satisfaction data, but each plot communicates something different.</p>
<p>We don't expect you to memorise all of the plot types or the methods for customising them, but it will be helpful to try out the code in the examples below for yourself, changing values to test your understanding.</p>
<div id="counting-categories" class="section level3" number="3.8.1">
<h3>
<span class="header-section-number">3.8.1</span> Counting categories<a class="anchor" aria-label="anchor" href="#counting-categories"><i class="fas fa-link"></i></a>
</h3>
<div id="bar-plot" class="section level4" number="3.8.1.1">
<h4>
<span class="header-section-number">3.8.1.1</span> Bar plot<a class="anchor" aria-label="anchor" href="#bar-plot"><i class="fas fa-link"></i></a>
</h4>
<p>If you want to count the number of things per category, you can use <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code>. You only need to provide a <code>x</code> mapping to <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> because by default <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> uses the number of observations in each group of <code>x</code> and the value for <code>y</code>, so you don't need to tell it what to put on the y-axis.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">issue_category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-session1.1_files/figure-html/unnamed-chunk-13-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="one-continuous-variable" class="section level3" number="3.8.2">
<h3>
<span class="header-section-number">3.8.2</span> One continuous variable<a class="anchor" aria-label="anchor" href="#one-continuous-variable"><i class="fas fa-link"></i></a>
</h3>
<p>If you have a continuous variable, like the number of seconds callers have to wait, you can use <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> or <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code> to show the distribution. Just like <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> you are only required to specify the <code>x</code> variable.</p>
<div id="histogram" class="section level4" number="3.8.2.1">
<h4>
<span class="header-section-number">3.8.2.1</span> Histogram<a class="anchor" aria-label="anchor" href="#histogram"><i class="fas fa-link"></i></a>
</h4>
<p>A histogram splits the data into "bins" along the x-axis and shows the count of how many observations are in each bin along the y-axis.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-14"></span>
<img src="03-session1.1_files/figure-html/unnamed-chunk-14-1.png" alt="Histogram of wait times." width="100%"><p class="caption">
Figure 3.13: Histogram of wait times.
</p>
</div>
<p>You should always set the <code>binwidth</code> or number of <code>bins</code> to something meaningful for your data (otherwise you get an annoying message). You might need to try a few options before you find something that looks good and conveys the meaning of your plot -- try changing the values of <code>binwidth</code> and <code>bins</code> below to see what works best.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># adjust width of each bar</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">15</span><span class="op">)</span>

<span class="co"># adjust number of bars</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p>By default, the bars start <em>centered</em> on 0, so if <code>binwidth</code> is set to 15, the first bar would include -7.5 to 7.5 seconds, which doesn't make much sense. We can set <code>boundary = 0</code> so that each bar represents increments of 15 seconds <em>starting</em> from 0.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">15</span>, boundary <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-session1.1_files/figure-html/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>Finally, the default style of grey bars is ugly, so you can change that by setting the <code>fill</code> and <code>colour</code>, as well as using <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous()</a></code> to update the axis labels.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">15</span>, 
                 boundary <span class="op">=</span> <span class="fl">0</span>, 
                 fill <span class="op">=</span> <span class="st">"white"</span>, 
                 color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Wait time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">600</span>, <span class="fl">60</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-17"></span>
<img src="03-session1.1_files/figure-html/unnamed-chunk-17-1.png" alt="Histogram with custom styles." width="100%"><p class="caption">
Figure 3.14: Histogram with custom styles.
</p>
</div>
</div>
<div id="frequency-plot" class="section level4" number="3.8.2.2">
<h4>
<span class="header-section-number">3.8.2.2</span> Frequency plot<a class="anchor" aria-label="anchor" href="#frequency-plot"><i class="fas fa-link"></i></a>
</h4>
<p>Rather than plotting each bin as a bar, you can connect a line across the top of each bin using a frequency plot. The function <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly()</a></code> works the same as <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>, except it can't take a <code>fill</code> argument because it's just a line.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Wait time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">600</span>, <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly</a></span><span class="op">(</span>boundary <span class="op">=</span> <span class="fl">0</span>, binwidth <span class="op">=</span> <span class="fl">15</span>, 
                color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-session1.1_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div id="density-plot" class="section level4" number="3.8.2.3">
<h4>
<span class="header-section-number">3.8.2.3</span> Density plot<a class="anchor" aria-label="anchor" href="#density-plot"><i class="fas fa-link"></i></a>
</h4>
<p>If the distribution is smooth, a density plot is often a better way to show the distribution. A density plot doesn't need the <code>binwidth</code> or <code>boundary</code> arguments because it doesn't split the data into bins, but it can have <code>fill</code>.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Wait time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">600</span>, <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"purple"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-session1.1_files/figure-html/unnamed-chunk-19-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="grouped-continuous-variables" class="section level3" number="3.8.3">
<h3>
<span class="header-section-number">3.8.3</span> Grouped continuous variables<a class="anchor" aria-label="anchor" href="#grouped-continuous-variables"><i class="fas fa-link"></i></a>
</h3>
<p>There are several ways to compare continuous data across groups. Which you choose depends on what point you are trying to make with the plot.</p>
<div id="subdividing-distributions" class="section level4" number="3.8.3.1">
<h4>
<span class="header-section-number">3.8.3.1</span> Subdividing distributions<a class="anchor" aria-label="anchor" href="#subdividing-distributions"><i class="fas fa-link"></i></a>
</h4>
<p>In previous plots, we have used <code>fill</code> purely for visual reasons, e.g., we have changed the colour of the histogram bars to make them look nicer. However, you can also use <code>fill</code> to represent another variable so that the colours become meaningful.</p>
<p>Setting the <code>fill</code> aesthetic in the mapping will produce different coloured bars for each category of the <code>fill</code> variable, in this case <code>issue_category</code>.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, fill <span class="op">=</span> <span class="va">issue_category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>boundary <span class="op">=</span> <span class="fl">0</span>, 
                 binwidth <span class="op">=</span> <span class="fl">15</span>,
                 color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-20"></span>
<img src="03-session1.1_files/figure-html/unnamed-chunk-20-1.png" alt="Histogram with categories represented by fill." width="100%"><p class="caption">
Figure 3.15: Histogram with categories represented by fill.
</p>
</div>
<p>By default, the categories are positioned stacked on top of each other. The function <code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area()</a></code> gives a similar effect when <code>stat = "bin"</code>.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># area plot</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, fill <span class="op">=</span> <span class="va">issue_category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"bin"</span>, 
            boundary <span class="op">=</span> <span class="fl">0</span>, 
            binwidth <span class="op">=</span> <span class="fl">15</span>, 
            color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-21"></span>
<img src="03-session1.1_files/figure-html/unnamed-chunk-21-1.png" alt="Stacked area plot." width="100%"><p class="caption">
Figure 3.16: Stacked area plot.
</p>
</div>
</div>
<div id="comparing-distributions" class="section level4" number="3.8.3.2">
<h4>
<span class="header-section-number">3.8.3.2</span> Comparing distributions<a class="anchor" aria-label="anchor" href="#comparing-distributions"><i class="fas fa-link"></i></a>
</h4>
<p>If you want to compare more than one distribution, you can set the <code>position</code> argument of <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> to "dodge" to put the bars for each group next to each other instead of stacking them. However, this can look confusing with several categories. Instead, use<code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly()</a></code> to plot a line connecting the top of each bin.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># dodged histogram</span>
<span class="va">histogram_dodge</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, 
                          fill <span class="op">=</span> <span class="va">issue_category</span>,
                          colour <span class="op">=</span> <span class="va">issue_category</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>boundary <span class="op">=</span> <span class="fl">0</span>, 
                 binwidth <span class="op">=</span> <span class="fl">15</span>, 
                 position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Wait time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">600</span>, <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Dodged Histogram"</span><span class="op">)</span>

<span class="co"># frequency plot</span>
<span class="va">freqpoly_plot</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>,
                          fill <span class="op">=</span> <span class="va">issue_category</span>,
                          colour <span class="op">=</span> <span class="va">issue_category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">15</span>, 
                boundary <span class="op">=</span> <span class="fl">0</span>,
                size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Wait time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">600</span>, <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Frequency"</span><span class="op">)</span>

<span class="co"># put plots together</span>
<span class="va">histogram_dodge</span> <span class="op">+</span> <span class="va">freqpoly_plot</span> <span class="op">+</span> 
  <span class="fu"><a href="https://patchwork.data-imaginist.com/reference/plot_layout.html">plot_layout</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">1</span>, guides <span class="op">=</span> <span class="st">"collect"</span><span class="op">)</span> <span class="co"># collects the legends together, try removing this</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-22"></span>
<img src="03-session1.1_files/figure-html/unnamed-chunk-22-1.png" alt="Different ways to plot the distribution of a continuous variable for multiple groups." width="100%"><p class="caption">
Figure 3.17: Different ways to plot the distribution of a continuous variable for multiple groups.
</p>
</div>
</div>
<div id="violin-plot" class="section level4" number="3.8.3.3">
<h4>
<span class="header-section-number">3.8.3.3</span> Violin plot<a class="anchor" aria-label="anchor" href="#violin-plot"><i class="fas fa-link"></i></a>
</h4>
<p>Another way to compare groups of continuous variables is the violin plot. This is like a density plot, but rotated 90 degrees and mirrored - the fatter the violin, the larger proportion of data points there are at that value.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">issue_category</span>, y <span class="op">=</span> <span class="va">wait_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:violin-plot"></span>
<img src="03-session1.1_files/figure-html/violin-plot-1.png" alt="Violin-plot." width="100%"><p class="caption">
Figure 3.18: Violin-plot.
</p>
</div>
</div>
<div id="boxplot" class="section level4" number="3.8.3.4">
<h4>
<span class="header-section-number">3.8.3.4</span> Boxplot<a class="anchor" aria-label="anchor" href="#boxplot"><i class="fas fa-link"></i></a>
</h4>
<p>Boxplots serve a similar purpose to violin plots. They don't show you the shape of the distribution, but rather some statistics about it. The middle line represents the <a class="glossary" target="_blank" title="The middle number in a distribution where half of the values are larger and half are smaller." href="https://psyteachr.github.io/glossary/m#median">median</a>; half the data are above this line and half below it. The box encloses the 25th to 75th percentiles of the data, so 50% of the data falls inside the box. The "whiskers" extending above and below the box extend 1.5 times the height of the box, although you can change this with the <code>coef</code> argument. The points show <a class="glossary" target="_blank" title="A data point that is extremely distant from most of the other data points" href="https://psyteachr.github.io/glossary/o#outlier">outliers</a> -- individual data points that fall outside of this range.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">issue_category</span>, y <span class="op">=</span> <span class="va">wait_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:box-plot"></span>
<img src="03-session1.1_files/figure-html/box-plot-1.png" alt="Basic boxplot." width="100%"><p class="caption">
Figure 3.19: Basic boxplot.
</p>
</div>
</div>
<div id="combo-plots" class="section level4" number="3.8.3.5">
<h4>
<span class="header-section-number">3.8.3.5</span> Combo plots<a class="anchor" aria-label="anchor" href="#combo-plots"><i class="fas fa-link"></i></a>
</h4>
<p>Violin plots are frequently layered with other geoms that represent the mean or median values in the data. This is a lot of code, to help your understanding a) run it layer by layer to see how it builds up and b) change the values throughout the code</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add fill and colour to the mapping</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>,  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">issue_category</span>, 
                         y <span class="op">=</span> <span class="va">wait_time</span>,
                         fill <span class="op">=</span> <span class="va">issue_category</span>,
                         colour <span class="op">=</span> <span class="va">issue_category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Issue Category"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Wait Time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">600</span>, <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">360</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"none"</span>, colour <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co"># add a line at median (50%) score</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.4</span>, 
              draw_quantiles <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co"># add a boxplot</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.25</span>, 
               fill <span class="op">=</span> <span class="st">"white"</span>, 
               alpha <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co"># add a point that represents the mean</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">mean</span>, 
               geom <span class="op">=</span> <span class="st">"point"</span>, 
               size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"ViolinBox"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:violin-combos"></span>
<img src="03-session1.1_files/figure-html/violin-combos-1.png" alt="Violin plots combined with different methods to represent means and medians." width="100%"><p class="caption">
Figure 3.20: Violin plots combined with different methods to represent means and medians.
</p>
</div>
</div>
</div>
<div id="two-continuous-variables" class="section level3" number="3.8.4">
<h3>
<span class="header-section-number">3.8.4</span> Two continuous variables<a class="anchor" aria-label="anchor" href="#two-continuous-variables"><i class="fas fa-link"></i></a>
</h3>
<p>When you want to see how two continuous variables are related, set one as the x-axis and the other as the y-axis. Usually, if one variable causes the other, you plot the cause on the x-axis and the effect on the y-axis. Here, we want to see if longer wait times cause the calls to be longer.</p>
<div id="scatterplot" class="section level4" number="3.8.4.1">
<h4>
<span class="header-section-number">3.8.4.1</span> Scatterplot<a class="anchor" aria-label="anchor" href="#scatterplot"><i class="fas fa-link"></i></a>
</h4>
<p>The function to create a scatterplot is called <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:demo-point"></span>
<img src="03-session1.1_files/figure-html/demo-point-1.png" alt="Scatterplot with geom_point()." width="100%"><p class="caption">
Figure 3.21: Scatterplot with geom_point().
</p>
</div>
</div>
<div id="trendlines" class="section level4" number="3.8.4.2">
<h4>
<span class="header-section-number">3.8.4.2</span> Trendlines<a class="anchor" aria-label="anchor" href="#trendlines"><i class="fas fa-link"></i></a>
</h4>
<p>In Figure <a href="session-1-1.html#fig:layers">3.3</a>, we emphasised the relationship between wait time and call time with a trendline created by <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code> using the argument <code>method = lm</code> ("lm" stands for "linear model" or a straight line relationship). You can also set <code>method = loess</code> to visualise a non-linear relationship.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lm_plot</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">lm</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"method = lm"</span><span class="op">)</span>

<span class="va">loess_plot</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wait_time</span>, y <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="va">loess</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"method = loess"</span><span class="op">)</span>

<span class="va">lm_plot</span> <span class="op">+</span> <span class="va">loess_plot</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'
## `geom_smooth()` using formula 'y ~ x'</code></pre>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-23"></span>
<img src="03-session1.1_files/figure-html/unnamed-chunk-23-1.png" alt="Different ways to show the relationship between two continuous variables." width="100%"><p class="caption">
Figure 3.22: Different ways to show the relationship between two continuous variables.
</p>
</div>
<div class="warning">
<p>If there isn't much data at the extremes of the x-axis, the curve can be very uncertain. This is represented by the wider shaded area, which means that the true relationship might be anywhere within that area. Add the argument <code>se = FALSE</code> to <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code> to remove this "standard error" shading.</p>
</div>
</div>
</div>
<div id="ordinal-variables" class="section level3" number="3.8.5">
<h3>
<span class="header-section-number">3.8.5</span> Ordinal variables<a class="anchor" aria-label="anchor" href="#ordinal-variables"><i class="fas fa-link"></i></a>
</h3>
<p>When you have a limited range of numeric values, such as an ordinal rating scale, sometimes overlapping data makes it difficult to see what is going on in a point plot. For example, the plot below shows satisfaction ratings by call time but because all the ratings are 1, 2, 3, 4 or 5, it makes it hard to see exactly how many data points there are at each point.</p>
<p>In this section, we'll explore a few options for dealing with this.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_time</span>, y <span class="op">=</span> <span class="va">satisfaction</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:over-plot"></span>
<img src="03-session1.1_files/figure-html/over-plot-1.png" alt="Overlapping data." width="100%"><p class="caption">
Figure 3.23: Overlapping data.
</p>
</div>
<div id="jitter-plot" class="section level4" number="3.8.5.1">
<h4>
<span class="header-section-number">3.8.5.1</span> Jitter plot<a class="anchor" aria-label="anchor" href="#jitter-plot"><i class="fas fa-link"></i></a>
</h4>
<p>You can use <code><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter()</a></code> to move the points around a bit to make them easier to see. You can also set alpha transparency. Here, the x-axis is continuous, so there is no need to jitter the <code>width</code>, but the y-axis is ordinal categories, so the <code>height</code> is jittered between -0.2 and +0.2 away from the true y-value. It can help to play around with these values to understand what the jitter is doing.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_time</span>, y <span class="op">=</span> <span class="va">satisfaction</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0</span>, height <span class="op">=</span> <span class="fl">.2</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:jitter-plot"></span>
<img src="03-session1.1_files/figure-html/jitter-plot-1.png" alt="Jitter plot." width="100%"><p class="caption">
Figure 3.24: Jitter plot.
</p>
</div>
</div>
<div id="facets" class="section level4" number="3.8.5.2">
<h4>
<span class="header-section-number">3.8.5.2</span> Facets<a class="anchor" aria-label="anchor" href="#facets"><i class="fas fa-link"></i></a>
</h4>
<p>Alternatively, you can use <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> to create a separate plot for each level of satisfaction. <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> uses the tilde (~) symbol, which you can roughly translate as "by", e.g., facet the plot <em>by</em> satisfaction rating. The <code>labeller</code> function controls the labels above each plot. <code>label_both</code> specifies that we want both the variable name (satisfaction) and the value (e.g., 1) printed on the plot to make it easier to read.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">survey_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">10</span>, 
                 boundary <span class="op">=</span> <span class="fl">0</span>, 
                 fill <span class="op">=</span> <span class="st">"dodgerblue"</span>, 
                 color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">satisfaction</span>, 
             ncol <span class="op">=</span> <span class="fl">1</span>, <span class="co"># try changing this to 2 </span>
             labeller <span class="op">=</span> <span class="va">label_both</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Call Time (seconds)"</span>,
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">600</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:fact-plot"></span>
<img src="03-session1.1_files/figure-html/fact-plot-1.png" alt="A histogram with facets." width="100%"><p class="caption">
Figure 3.25: A histogram with facets.
</p>
</div>
<div class="info">
<p>These are not, by any means, all the plot types that you can make in R. This chapter just gave you a basic overview. The <a href="session-1-1.html#resources-viz">further resources</a> section at the end of this chapter lists many resources, but the <a href="http://www.r-graph-gallery.com/" target="_blank">R Graph Gallery</a> is an especially useful one to get inspiration for the kinds of beautiful plots you can make in R.</p>
</div>
</div>
</div>
</div>
<div id="glossary-day1" class="section level2" number="3.9">
<h2>
<span class="header-section-number">3.9</span> Glossary<a class="anchor" aria-label="anchor" href="#glossary-day1"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-table"><table class="table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
term
</th>
<th style="text-align:left;">
definition
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/a.html#argument" class="glossary" target="_blank">argument</a>
</td>
<td style="text-align:left;">
A variable that provides input to a function.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/c.html#console" class="glossary" target="_blank">console</a>
</td>
<td style="text-align:left;">
The pane in RStudio where you can type in commands and view output messages.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/c.html#continuous" class="glossary" target="_blank">continuous</a>
</td>
<td style="text-align:left;">
Data that can take on any values between other existing values.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/e.html#extension" class="glossary" target="_blank">extension</a>
</td>
<td style="text-align:left;">
The end part of a file name that tells you what type of file it is (e.g., .R or .Rmd).
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/g.html#geom" class="glossary" target="_blank">geom</a>
</td>
<td style="text-align:left;">
The geometric style in which data are displayed, such as boxplot, density, or histogram.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/g.html#global-environment" class="glossary" target="_blank">global environment</a>
</td>
<td style="text-align:left;">
The interactive workspace where your script runs
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/k.html#knit" class="glossary" target="_blank">knit</a>
</td>
<td style="text-align:left;">
To create an HTML, PDF, or Word document from an R Markdown (Rmd) document
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/m.html#median" class="glossary" target="_blank">median</a>
</td>
<td style="text-align:left;">
The middle number in a distribution where half of the values are larger and half are smaller.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/o.html#outlier" class="glossary" target="_blank">outlier</a>
</td>
<td style="text-align:left;">
A data point that is extremely distant from most of the other data points
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/p.html#project" class="glossary" target="_blank">project</a>
</td>
<td style="text-align:left;">
A way to organise related files in RStudio
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/r.html#r-markdown" class="glossary" target="_blank">r markdown</a>
</td>
<td style="text-align:left;">
The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/v.html#vector" class="glossary" target="_blank">vector</a>
</td>
<td style="text-align:left;">
A type of data structure that collects values with the same data type, like T/F values, numbers, or strings.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/w.html#working-directory" class="glossary" target="_blank">working directory</a>
</td>
<td style="text-align:left;">
The filepath where R is currently reading and writing files.
</td>
</tr>
</tbody>
</table></div>
</div>
<div id="resources-viz" class="section level2" number="3.10">
<h2>
<span class="header-section-number">3.10</span> Further Resources<a class="anchor" aria-label="anchor" href="#resources-viz"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><a href="https://www.rstudio.org/links/r_markdown_cheat_sheet">R Markdown Cheat Sheet</a></li>
<li>
<a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-visualization.pdf">ggplot2 cheat sheet</a>.
<!--
-   [R Markdown reference Guide](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf)
-->
</li>
<li><a href="https://rmarkdown.rstudio.com/lesson-1.html">R Markdown Tutorial</a></li>
<li>
<a href="https://bookdown.org/yihui/rmarkdown/">R Markdown: The Definitive Guide</a> by Yihui Xie, J. J. Allaire, &amp; Garrett Grolemund</li>
<li>
<a href="https://r4ds.had.co.nz/r-markdown.html">Chapter 27: R Markdown</a> of <em>R for Data Science</em>
</li>
<li>
<a href="https://slides.djnavarro.net/project-structure/">Project Structure</a> by Danielle Navarro</li>
</ul>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  // open rdrr links externally
  $("a[href^='https://rdrr.io']").click(function(){
    window.open(this.href);
    return false;
  });

  // visible second sidebar in mobile
  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script><div class="chapter-nav">
<div class="prev"><a href="intro.html"><span class="header-section-number">2</span> Prep: Intro to R and RStudio</a></div>
<div class="next"><a href="session-1-2.html"><span class="header-section-number">4</span> Session 1.2</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#session-1-1"><span class="header-section-number">3</span> Session 1.1</a></li>
<li>
<a class="nav-link" href="#projects"><span class="header-section-number">3.1</span> Organising a project</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#project-start"><span class="header-section-number">3.1.1</span> Start a Project</a></li></ul>
</li>
<li>
<a class="nav-link" href="#rmarkdown"><span class="header-section-number">3.2</span> R Markdown</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#new-document"><span class="header-section-number">3.2.1</span> New document</a></li>
<li><a class="nav-link" href="#code-chunks"><span class="header-section-number">3.2.2</span> Code chunks</a></li>
<li><a class="nav-link" href="#running-code"><span class="header-section-number">3.2.3</span> Running code</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#loading-data"><span class="header-section-number">3.3</span> Loading data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#built-in-data"><span class="header-section-number">3.3.1</span> Built-in data</a></li>
<li><a class="nav-link" href="#loading-online"><span class="header-section-number">3.3.2</span> Online sources</a></li>
</ul>
</li>
<li><a class="nav-link" href="#rmd-knit"><span class="header-section-number">3.4</span> Knitting your file</a></li>
<li><a class="nav-link" href="#building-plots"><span class="header-section-number">3.5</span> Building plots</a></li>
<li>
<a class="nav-link" href="#plot-setup"><span class="header-section-number">3.6</span> Plot setup</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#plot-setup-data"><span class="header-section-number">3.6.1</span> Data</a></li>
<li><a class="nav-link" href="#mapping"><span class="header-section-number">3.6.2</span> Mapping</a></li>
<li><a class="nav-link" href="#geoms"><span class="header-section-number">3.6.3</span> Geoms</a></li>
<li><a class="nav-link" href="#multiple-geoms"><span class="header-section-number">3.6.4</span> Multiple geoms</a></li>
<li><a class="nav-link" href="#saving-plots"><span class="header-section-number">3.6.5</span> Saving plots</a></li>
<li><a class="nav-link" href="#combining-plots"><span class="header-section-number">3.6.6</span> Combining plots</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#customising-plots"><span class="header-section-number">3.7</span> Customising plots</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#format-axes"><span class="header-section-number">3.7.1</span> Format axes</a></li>
<li><a class="nav-link" href="#axis-limits"><span class="header-section-number">3.7.2</span> Axis limits</a></li>
<li><a class="nav-link" href="#themes"><span class="header-section-number">3.7.3</span> Themes</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#appropriate-plots"><span class="header-section-number">3.8</span> Appropriate plots</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#counting-categories"><span class="header-section-number">3.8.1</span> Counting categories</a></li>
<li><a class="nav-link" href="#one-continuous-variable"><span class="header-section-number">3.8.2</span> One continuous variable</a></li>
<li><a class="nav-link" href="#grouped-continuous-variables"><span class="header-section-number">3.8.3</span> Grouped continuous variables</a></li>
<li><a class="nav-link" href="#two-continuous-variables"><span class="header-section-number">3.8.4</span> Two continuous variables</a></li>
<li><a class="nav-link" href="#ordinal-variables"><span class="header-section-number">3.8.5</span> Ordinal variables</a></li>
</ul>
</li>
<li><a class="nav-link" href="#glossary-day1"><span class="header-section-number">3.9</span> Glossary</a></li>
<li><a class="nav-link" href="#resources-viz"><span class="header-section-number">3.10</span> Further Resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/psyteachr/template/blob/master/book/03-session1.1.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/psyteachr/template/edit/master/book/03-session1.1.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Intro to R workshop</strong>" was written by Emily Nordmann. It was last built on 2022-06-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
